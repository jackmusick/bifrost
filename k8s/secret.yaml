# Bifrost Secrets Template
#
# IMPORTANT: Do NOT commit this file with actual values!
# This is a template showing the required secrets.
#
# Create secrets using kubectl:
#   kubectl create secret generic bifrost-secrets \
#     --namespace=bifrost \
#     --from-literal=BIFROST_SECRET_KEY='your-32-char-secret-key-here' \
#     --from-literal=BIFROST_DATABASE_URL='postgresql+asyncpg://user:pass@host:5432/bifrost' \
#     --from-literal=BIFROST_DATABASE_URL_SYNC='postgresql://user:pass@host:5432/bifrost' \
#     --from-literal=BIFROST_RABBITMQ_URL='amqp://bifrost:pass@rabbitmq:5672/' \
#     --from-literal=BIFROST_RABBITMQ_PASSWORD='your-rabbitmq-password' \
#     --from-literal=BIFROST_REDIS_URL='redis://redis:6379/0' \
#     --from-literal=BIFROST_S3_ENDPOINT_URL='https://s3.us-east-1.amazonaws.com' \
#     --from-literal=BIFROST_S3_ACCESS_KEY='your-access-key' \
#     --from-literal=BIFROST_S3_SECRET_KEY='your-secret-key'
#
# Or use a sealed-secrets controller, external-secrets, or your cloud's secrets manager.

apiVersion: v1
kind: Secret
metadata:
  name: bifrost-secrets
  namespace: bifrost
  labels:
    app.kubernetes.io/name: bifrost
    app.kubernetes.io/part-of: bifrost
type: Opaque
stringData:
  # Required: 32+ character secret for JWT signing and Fernet encryption
  BIFROST_SECRET_KEY: "REPLACE_WITH_32_CHAR_SECRET_KEY"

  # Required: PostgreSQL connection strings (use managed DB like RDS, Cloud SQL)
  BIFROST_DATABASE_URL: "postgresql+asyncpg://bifrost:password@postgres.example.com:5432/bifrost"
  BIFROST_DATABASE_URL_SYNC: "postgresql://bifrost:password@postgres.example.com:5432/bifrost"

  # Required: RabbitMQ connection (use managed service like CloudAMQP, Amazon MQ)
  # For in-cluster RabbitMQ, use: amqp://bifrost:password@rabbitmq:5672/
  BIFROST_RABBITMQ_URL: "amqp://bifrost:password@rabbitmq:5672/"
  # Password for in-cluster RabbitMQ (referenced by rabbitmq deployment)
  BIFROST_RABBITMQ_PASSWORD: "REPLACE_WITH_RABBITMQ_PASSWORD"

  # Required: Redis connection (in-cluster or managed like ElastiCache)
  # Note: Redis is used for caching only; RabbitMQ handles message queuing
  BIFROST_REDIS_URL: "redis://redis:6379/0"

  # Required: S3-compatible storage
  BIFROST_S3_ENDPOINT_URL: "https://s3.us-east-1.amazonaws.com"
  BIFROST_S3_ACCESS_KEY: "REPLACE_WITH_ACCESS_KEY"
  BIFROST_S3_SECRET_KEY: "REPLACE_WITH_SECRET_KEY"

  # Optional: Default admin user (skip setup wizard)
  # BIFROST_DEFAULT_USER_EMAIL: "admin@example.com"
  # BIFROST_DEFAULT_USER_PASSWORD: "secure-password"

  # Optional: OAuth SSO
  # BIFROST_MICROSOFT_CLIENT_ID: ""
  # BIFROST_MICROSOFT_CLIENT_SECRET: ""
  # BIFROST_MICROSOFT_TENANT_ID: ""
  # BIFROST_GOOGLE_CLIENT_ID: ""
  # BIFROST_GOOGLE_CLIENT_SECRET: ""
  # BIFROST_OIDC_DISCOVERY_URL: ""
  # BIFROST_OIDC_CLIENT_ID: ""
  # BIFROST_OIDC_CLIENT_SECRET: ""

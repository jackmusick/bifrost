# Pre-fill Forms from URL Parameters

Load user context and pre-populate forms when they open

---

Launch workflows (also called startup workflows) run when a form loads to fetch data and make it available throughout the form. Use them to pre-fill fields, check permissions, or load context.

## What You'll Build

A customer feedback form that:

-   Loads customer details from URL parameter
-   Pre-fills customer name and email
-   Shows personalized welcome message

## Create Launch Workflow

Create a workflow that accepts a parameter and returns data (`workspace/workflows/load_customer.py`):

```python
from bifrost import workflow

@workflow
async def load_customer_data(customer_id: str) -> dict:
    """Load customer data for pre-filling form."""

    # Fetch customer from database
    customer = await get_customer(customer_id)

    return {
        "customer_name": customer.name,
        "customer_email": customer.email,
        "purchase_date": customer.last_purchase_date,
        "product_name": customer.last_product
    }
```

    The workflow returns a dict. All keys become available as
    `context.workflow.*` throughout the form.

## Configure Form

1. Open form in builder
2. Right panel â†’ **Launch Workflow** section
3. Select `load_customer_data`

## Allow URL Parameter

To pass `customer_id` via URL:

1. Add form field: `customer_id` (hidden text field)
2. Enable **Allow as Query Parameter** on the field
3. Save form

Now you can use: `/execute/form?customer_id=cust-123`

## Use Workflow Data

**Important**: Default values for form fields do NOT support context expressions. To pre-fill fields with dynamic data, pass values via URL query parameters instead.

### Display in HTML Content

Show workflow data using HTML Content fields:

```jsx
<div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
    <h2 className="font-bold text-lg">
        Welcome back, {context.workflow.customer_name}!
    </h2>
    <p className="text-sm text-gray-700">
        We see you purchased {context.workflow.product_name} on{" "}
        {context.workflow.purchase_date}. We'd love to hear your feedback!
    </p>
</div>
```

### Control Field Visibility

Show fields based on workflow data:

```javascript
// Show VIP feedback field only for premium customers
context.workflow.customer_tier === "premium";
```

## Common Use Cases

### Check User Permissions

```python
from bifrost import workflow, context

@workflow
async def check_permissions() -> dict:
    """Check if user can access form."""

    return {
        "is_admin": context.is_platform_admin,
        "user_email": context.email,
        "can_approve": await has_permission(context.user_id, "approve_requests")
    }
```

Use in form visibility rules to show admin-only fields.

### Load Organization Context

```python
from bifrost import workflow, context

@workflow
async def load_org_context() -> dict:
    """Load organization details."""

    org = await get_organization(context.org_id)

    return {
        "org_name": org.name,
        "org_plan": org.subscription_plan,
        "org_features": org.enabled_features
    }
```

Use to display org info or control feature availability.

### Pre-fill from External System

```python
from bifrost import workflow

@workflow
async def load_ticket_data(ticket_id: str) -> dict:
    """Load ticket details for follow-up form."""

    ticket = await fetch_ticket_from_psa(ticket_id)

    return {
        "ticket_number": ticket.number,
        "customer_name": ticket.customer,
        "issue_description": ticket.description,
        "priority": ticket.priority
    }
```

Pre-fill form with existing ticket details for follow-up.

## Default Parameters

Provide default values when URL params aren't provided:

1. In form settings â†’ **Default Launch Parameters**
2. Enter JSON:

```json
{
    "include_history": true,
    "limit": 10
}
```

These are used when parameters aren't in the URL.

## Testing

Test launch workflow before using in form:

1. Click **Play** button next to Launch Workflow in form builder
2. Enter test parameters
3. Click **Execute**
4. View returned data
5. Verify all expected fields are present

## Troubleshooting

**Form won't load**: Launch workflow has required parameters but no default values or URL params provided. Add defaults or pass via URL.

**Data not appearing**: Click **Info** button in form builder to see `context.workflow` object. Verify workflow returns expected fields.

**Workflow fails**: Check workflow logs for errors. Verify parameters are correct type and external APIs are accessible.

**Parameters not working**: Ensure form field with same name exists and has "Allow as Query Parameter" enabled.

## Best Practices

1. **Keep workflows fast** - They block form load. Avoid slow API calls or heavy processing.
2. **Return only needed data** - Don't fetch entire objects if you only need a few fields.
3. **Handle missing data** - Return sensible defaults if external system returns null.
4. **Use caching** - Cache expensive lookups to speed up repeated form loads.
5. **Test independently** - Test launch workflow with Play button before using in form.

## Example: Complete Survey Form

  
```python
from bifrost import workflow

@workflow
async def load_survey_context(customer_id: str) -> dict:
    """Load customer context for satisfaction survey."""
    customer = await get_customer(customer_id)

    return {
        "customer_name": customer.name,
        "customer_email": customer.email,
        "last_purchase": customer.last_purchase_date,
        "product_name": customer.last_product_name,
        "is_premium": customer.tier == "premium"
    }

````
  

  
```jsx
<div className="p-6 bg-blue-50 rounded-lg border border-blue-200 mb-4">
  <h2 className="font-bold text-xl mb-2">
    Hi {context.workflow.customer_name}! ðŸ‘‹
  </h2>
  <p className="text-gray-700">
    Thank you for purchasing {context.workflow.product_name}.
    We'd love to hear about your experience!
  </p>
</div>
````

  

  
1. Create hidden field `customer_id`
2. Enable "Allow as Query Parameter"
3. Set Launch Workflow to `load_survey_context`
4. Add HTML Content field with welcome message (uses `context.workflow.*`)
5. Add visibility rules to show/hide fields based on `context.workflow.is_premium`
6. Share link: `/execute/form?customer_id=cust-123`

**Note**: To pre-fill name/email fields, pass them as query parameters: `?customer_id=123&name=John&email=john@example.com`
  

## Next Steps

-   [Display Personalized Welcome Messages](/how-to-guides/forms/html-content) - Use workflow data in HTML
-   [Show Fields Based on User Permissions](/how-to-guides/forms/visibility-rules) - Control visibility with workflow data
-   [Cascading Dropdowns](/how-to-guides/forms/cascading-dropdowns) - Use workflow data in dropdowns